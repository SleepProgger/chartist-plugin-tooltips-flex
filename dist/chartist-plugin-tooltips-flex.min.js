/* chartist-plugin-pointlabels 0.0.6
 * Copyright Â© 2018 Gion Kunz
 * Free to use under the WTFPL license.
 * http://www.wtfpl.net/
 */

!function(a,b){"function"==typeof define&&define.amd?define(["chartist"],function(c){return a.returnExportsGlobal=b(c)}):"object"==typeof exports?module.exports=b(require("chartist")):a["Chartist.plugins.Tooltips_flex"]=b(Chartist)}(this,function(a){return function(a,b,c){"use strict";function d(a,b,c){for(var d=0,e=a.length-1;d<=e;){var f=e+d>>1,g=c(b,a[f]);if(g>0)d=f+1;else{if(!(g<0))return f;e=f-1}}return d-1}function e(a,b){for(var c=[],d="",e=0;e<a.length;++e)c.push(a[e].value.x),d+=a[e].name+": "+this.tooltipFormatX(a[e].value.y)+"\n";return d=this.tooltipFormatY(this.tooltipMergeX(c))+"\n"+d}var f={tooltipOffset:{x:0,y:0},tooltipTooltipClass:"chartist-tooltip-flex",tooltipMarkerClass:"chartist-tooltip-flex-marker",tooltipMergeFnc:"nearest",tooltipDisplayFnc:e,tooltipHighlightPointClass:"ct-tooltip-point-hit",tooltipFollowMaxLine:!1,tooltipTooltipYDist:15,tooltipFormatX:c.noop,tooltipFormatY:c.noop,tooltipNameFormat:c.noop,tooltipMergeX:function(a){return a[0]}},g={left:function(a,b,c){return a||(a=b),[[a.svg],a.data]},right:function(a,b,c){return b||(b=a),[[b.svg],b.data]},nearest:function(a,b,c){return a?b?Math.abs(a.svg.attr("x1")-c)<Math.abs(b.svg.attr("x1")-c)?[[a.svg],a.data]:[[b.svg],b.data]:[[a.svg],a.data]:[[b.svg],b.data]}};c.plugins=c.plugins||{},c.plugins.Tooltips_flex=function(e){return e=c.extend({},f,e),e.tooltipDisplayFnc=e.tooltipDisplayFnc.bind(e),function(f){function h(a,b){var c=d(a.raw_x,b,function(a,b){return a>b?1:a<b?-1:0}),e=a.data.data,f=null;c=Math.max(0,c);var g={svg:a.svg[c],data:e[c]};return c+1<e.length&&(f={svg:a.svg[c+1],data:e[c+1]}),[g,f]}function i(){k.classList.add("tooltip-show"),l.addClass("tooltip-show"),s=!0}var j=f.container,k=b.body.querySelector(".chartist-tooltip-flex"),l=null,m=0,n=0;console.log("Chart:",f);var o=[],p=!1,q=[],r=e.tooltipMergeFnc;"function"!=typeof r&&(r=g[r]),k||(k=b.createElement("div"),k.className=e.tooltipTooltipClass,k.style.position="absolute",k.style.whiteSpace="pre",b.body.append(k));var s=!1;j.addEventListener("mouseenter",function(a){i()}),j.addEventListener("mouseleave",function(a){k.classList.remove("tooltip-show"),l.removeClass("tooltip-show")});var t=-1;j.addEventListener("mousemove",function(b){if(p&&t!==b.pageX){s||i(),t=b.pageX;for(var c=f.container.getBoundingClientRect(),d=c.left+a.pageXOffset,g=b.pageX-d,j=0;j<q.length;++j)q[j].classList.remove(e.tooltipHighlightPointClass);q=[];for(var u=[],v=[],j=0;j<o.length;++j){var w=h(o[j],g);w=r(w[0],w[1],g),u.push({value:w[1],name:o[j].data.name});for(var x=w[0],y=0;y<x.length;++y){var z=x[y].getNode();v.push(z.getAttribute("y1")),z.classList.add(e.tooltipHighlightPointClass),q.push(z)}}l._node.setAttribute("transform","translate("+g+" 0)");var A=e.tooltipDisplayFnc(u,k);A&&(k.textContent=A),n=k.offsetHeight,m=k.offsetWidth;var B=-m/2+e.tooltipOffset.x,C=b.pageY;e.tooltipFollowMaxLine&&(C=Math.min.apply(Math,v)+c.top+a.pageYOffset-e.tooltipTooltipYDist);var D=-n+e.tooltipOffset.y;k.style.top=C+D+"px",k.style.left=b.pageX+B+"px"}}),f instanceof c.Line&&f.on("created",function(a){console.log(a);var b=f.svg.querySelector(".ct-grids"),c=b.getNode().getBoundingClientRect(),d=f.container.getBoundingClientRect(),g=c.top-d.top;l=f.svg.elem("line",{x1:0,y1:g,x2:0,y2:c.height+g,style:e.tooltipMarkerClass},e.tooltipMarkerClass),o=[];for(var h=f.data.series,i=0;i<h.length;++i){var j=h[i].className;j=j?"."+j:'[*|series-name="'+h[i].name+'"]';for(var k=f.svg.querySelectorAll(j+" .ct-point").svgElements,m=[],n=0;n<k.length;++n)m.push(k[n].attr("x1"));var q={data:h[i],raw_x:m,svg:k};o.push(q)}p=!0})}},c.plugins.Tooltips_flex.mergeFunctions=g,c.plugins.Tooltips_flex.defaultOptions=f}(window,document,a),a.plugins.Tooltips_flex});
//# sourceMappingURL=chartist-plugin-tooltips-flex.min.js.map