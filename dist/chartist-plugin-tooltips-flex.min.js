/* chartist-plugin-tooltips-flex 0.0.1
 * Copyright Â© 2018 SleepProgger
 * Free to use under the WTFPL license.
 * http://www.wtfpl.net/
 */

!function(a,b){"function"==typeof define&&define.amd?define(["chartist"],function(c){return a.returnExportsGlobal=b(c)}):"object"==typeof exports?module.exports=b(require("chartist")):a["Chartist.plugins.Tooltips_flex"]=b(Chartist)}(this,function(a){return function(a,b,c){"use strict";function d(a,b,c){for(var d=0,e=a.length-1;d<=e;){var f=e+d>>1,g=c(b,a[f]);if(g>0)d=f+1;else{if(!(g<0))return f;e=f-1}}return d-1}function e(a,b){for(var c=[],d="",e=0;e<a.length;++e)c.push(a[e].value.x),d+=this.tooltipNameFormat(a[e])+": "+this.tooltipFormatX(a[e].value.y)+"\n";return d=this.tooltipFormatY(this.tooltipMergeXSeries(c))+"\n"+d}var f={tooltipOffset:{x:0,y:0},tooltipTooltipClass:"chartist-tooltip-flex",tooltipMarkerClass:"chartist-tooltip-flex-marker",tooltipMergeFnc:"nearest",tooltipDisplayFnc:e,tooltipHighlightPoint:!0,tooltipHighlightPointClass:"ct-tooltip-point-hit",tooltipFollowMaxLine:!1,tooltipTooltipYDist:15,tooltipFormatX:c.noop,tooltipFormatY:c.noop,tooltipNameFormat:function(a){return a.name},tooltipMergeXSeries:function(a){return a[0]}},g={left:function(a,b,c){return a||(a=b),[[a.svg],a.data]},right:function(a,b,c){return b||(b=a),[[b.svg],b.data]},nearest:function(a,b,c){return a?b?Math.abs(a.svg.attr("x1")-c)<Math.abs(b.svg.attr("x1")-c)?[[a.svg],a.data]:[[b.svg],b.data]:[[a.svg],a.data]:[[b.svg],b.data]}};c.plugins=c.plugins||{},c.plugins.Tooltips_flex=function(e){return e=c.extend({},f,e),e.tooltipDisplayFnc=e.tooltipDisplayFnc.bind(e),function(f){function h(a,b){var c=d(a.raw_x,b,function(a,b){return a>b?1:a<b?-1:0}),e=a.data.data,f=null;c=Math.max(0,c);var g={svg:a.svg[c],data:e[c]};return c+1<e.length&&(f={svg:a.svg[c+1],data:e[c+1]}),[g,f]}function i(){l.classList.add("tooltip-show"),m.addClass("tooltip-show"),t=!0}function j(){u=!1,t||i();for(var b=f.container.getBoundingClientRect(),c=b.left+a.pageXOffset,d=v.pageX-c,g=[],j=[],k=[],q=0;q<p.length;++q){var w=h(p[q],d);w=s(w[0],w[1],d),g.push({value:w[1],name:p[q].data.name});for(var x=w[0],y=0;y<x.length;++y){var z=x[y].getNode();k.push(z),j.push(z.getAttribute("y1"))}}var A=e.tooltipDisplayFnc(g,l);A&&(l.textContent=A),o=l.offsetHeight,n=l.offsetWidth;var B=-n/2+e.tooltipOffset.x,C=v.pageY;e.tooltipFollowMaxLine&&(C=Math.min.apply(Math,j)+b.top+a.pageYOffset-e.tooltipTooltipYDist);var D=-o+e.tooltipOffset.y;if(l.style.transform="translate("+(v.pageX+B)+"px, "+(C+D)+"px)",m.getNode().setAttribute("transform","translate("+d+" 0)"),e.tooltipHighlightPoint){for(var q=0;q<r.length;++q)r[q].classList.remove(e.tooltipHighlightPointClass);r=[];for(var q=0;q<k.length;++q)k[q].classList.add(e.tooltipHighlightPointClass),r.push(k[q])}}var k=f.container,l=b.body.querySelector(".chartist-tooltip-flex"),m=null,n=0,o=0,p=[],q=!1,r=[],s=e.tooltipMergeFnc;"function"!=typeof s&&(s=g[s]),l||(l=b.createElement("div"),l.className=e.tooltipTooltipClass,l.style.position="absolute",l.style.whiteSpace="pre",l.style.top="0",b.body.append(l));var t=!1,u=!1,v=null;k.addEventListener("mouseenter",function(a){i()}),k.addEventListener("mouseleave",function(a){l.classList.remove("tooltip-show"),m.removeClass("tooltip-show")}),k.addEventListener("mousemove",function(a){q&&(v=a,u||(u=!0,requestAnimationFrame(j)))}),f instanceof c.Line&&f.on("created",function(a){var b=f.svg.querySelector(".ct-grids"),c=b.getNode().getBoundingClientRect(),d=f.container.getBoundingClientRect(),g=c.top-d.top;m=f.svg.elem("line",{x1:0,y1:g,x2:0,y2:c.height+g,style:e.tooltipMarkerClass},e.tooltipMarkerClass),p=[];var h=f.data.series;console.log(f);for(var i=0;i<h.length;++i){var j=h[i].className;j=j?"."+j:'[*|series-name="'+h[i].name+'"]';for(var k=f.svg.querySelectorAll(j+" .ct-point").svgElements,l=[],n=0;n<k.length;++n)l.push(k[n].attr("x1"));var o={data:h[i],raw_x:l,svg:k};p.push(o)}q=!0})}},c.plugins.Tooltips_flex.mergeFunctions=g,c.plugins.Tooltips_flex.defaultOptions=f}(window,document,a),a.plugins.Tooltips_flex});
//# sourceMappingURL=chartist-plugin-tooltips-flex.min.js.map