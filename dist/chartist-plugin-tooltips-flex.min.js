/* chartist-plugin-tooltips-flex 0.0.1
 * Copyright Â© 2018 SleepProgger
 * Free to use under the WTFPL license.
 * http://www.wtfpl.net/
 */

!function(a,b){"function"==typeof define&&define.amd?define(["chartist"],function(c){return a.returnExportsGlobal=b(c)}):"object"==typeof exports?module.exports=b(require("chartist")):a["Chartist.plugins.Tooltips_flex"]=b(Chartist)}(this,function(a){return function(a,b,c){"use strict";function d(a,b){for(var c=[],d="",e=0;e<a.length;++e)c.push(a[e].value.x),d+=this.options.formatName(a[e].series.data)+": "+this.options.formatY(a[e].value.y)+"\n";var f=this.options.formatX(this.options.mergeXSeriesFnc(c));return f&&(d=f+"\n"+d),d}function e(a,b,c){for(var d=0,e=a.length-1;d<=e;){var f=e+d>>1,g=c(b,a[f]);if(g>0)d=f+1;else{if(!(g<0))return f;e=f-1}}return d-1}var f={tooltipOffset:{x:0,y:-15},tooltipClass:"chartist-tooltip-flex",markerClass:"chartist-tooltip-flex-marker",markerY:!1,mergeFnc:"nearest",displayFnc:d,highlightPoint:!0,highlightPointClass:"ct-tooltip-point-hit",formatX:c.noop,formatY:c.noop,formatName:function(a){var b=a.name;return b[0].toUpperCase()+b.substr(1)},mergeXSeriesFnc:function(a){return a[0]}};c.plugins=c.plugins||{},c.plugins.Tooltips_flex=function(a){a=c.extend({},f,a);var d=function(f){function g(a,b){var c=e(a.raw_x,b,function(a,b){return a>b?1:a<b?-1:0}),d=a.data.data,f=null;c=Math.max(0,c);var g=d[c];return c+1<d.length&&(f=d[c+1]),[g,f]}function h(){y=!1,x||i();for(var b=j(z.pageX,z.pageY),c=[],d=0;d<n.length;++d){var e=g(n[d],b.x);e=w(e[0],e[1],b.x),c.push({value:e,series:n[d]})}var f=a.displayFnc(c,k);f&&(k.textContent=f),v=k.offsetHeight,u=k.offsetWidth;var h=-u/2+a.tooltipOffset.x,l=-v+a.tooltipOffset.y;if(k.style.transform="translate("+(z.pageX+h)+"px, "+(z.pageY+l)+"px)",p.getNode().setAttribute("transform","translate("+b.x+" 0)"),a.markerY&&q.getNode().setAttribute("transform","translate(0 "+b.y+")"),a.highlightPoint)for(var d=0;d<c.length;++d){var m=c[d].value;c[d].series.point.getNode().setAttribute("transform","translate("+B(m.x)+" "+C(m.y)+")")}}function i(){k.classList.add("tooltip-show"),p.addClass("tooltip-show"),a.markerY&&q.addClass("tooltip-show"),x=!0}function j(a,b){var c=m.getScreenCTM(),d=A||m.createSVGPoint();return d.x=a,d.y=b,(d=d.matrixTransform(c.inverse()))||{x:0,y:0}}var k=b.body.querySelector(a.tooltipClass),l=f.container,m=null,n=[],o=!1,p=null,q=null,r=null,s=null;a.displayFnc=a.displayFnc.bind(d),d.options=a;var t=d.merge_functions={left:function(a,b,c){return a||(a=b),a},right:function(a,b,c){return b||(b=a),b},nearest:function(a,b,c){return a?b?(c=D(c),Math.abs(a.x-c)<Math.abs(b.x-c)?a:b):a:b},interpolate:function(a,b,c){if(!a)return b;if(!b)return a;c=D(c),console.log("Point",c);var d=b.x-a.x,e=Math.abs(a.x-c)/d,f=Math.abs(b.x-c)/d;return{x:c,y:b.y*e+a.y*f}}},u=0,v=0,w=a.mergeFnc;"function"!=typeof w&&(w=t[w]),k||(k=b.createElement("div"),k.className=a.tooltipClass,k.style.position="absolute",k.style.whiteSpace="pre",k.style.top="0",b.body.append(k));var x=!1,y=!1,z=null;l.addEventListener("mouseenter",function(a){i()}),l.addEventListener("mouseleave",function(b){k.classList.remove("tooltip-show"),p.removeClass("tooltip-show"),a.markerY&&q.removeClass("tooltip-show")}),l.addEventListener("mousemove",function(a){o&&(z=a,y||(y=!0,requestAnimationFrame(h)))}),f instanceof c.Line&&f.on("created",function(b){r=b.axisX,s=b.axisY;var c=f.svg.getNode();m="svg"===c.tagName?c:c.ownerSVGElement;var d=f.svg.querySelector(".ct-grids"),e=d.getNode().getBoundingClientRect(),g=f.container.getBoundingClientRect(),h=e.top-g.top;if(p=f.svg.elem("line",{x1:0,y1:h,x2:0,y2:e.height+h,style:a.markerClass},a.markerClass),a.markerY){var i=e.left-g.left;q=f.svg.elem("line",{x1:i,y1:0,x2:e.width+i,y2:0,style:a.markerClass},a.markerClass)}n=[];for(var j=f.data.series,k=0;k<j.length;++k){for(var b=[],l=[],t=j[k].className?"."+j[k].className:'[*|series-name="'+j[k].name+'"]',u=f.svg.querySelector(t),v=0;v<j[k].data.length;++v)l.push(B(j[k].data[v].x,r));var w={data:j[k],raw_x:l,svg:u};a.highlightPoint&&(w.point=u.elem("line",{x1:0,y1:0,x2:.01,y2:0},f.options.classNames.point+" "+a.highlightPointClass)),n.push(w),console.log("series:",w)}o=!0});var A=null,B=d.unProjectX=function(a){var b=r.bounds||r.range,c=b.max,d=b.min,e=b.range||c-d;return r.axisLength/e*(a-d)+r.chartRect.x1},C=d.unProjectY=function(a){var b=s.bounds||s.range,c=b.max,d=b.min,e=b.range||c-d;return s.chartRect.y1-s.axisLength/e*(a-d)},D=d.project=function(a){var b=r.bounds||r.range,c=b.max,d=b.min,e=b.range||c-d;return(a-r.chartRect.x1)*e/r.axisLength+d}};return d}}(window,document,a),a.plugins.Tooltips_flex});
//# sourceMappingURL=chartist-plugin-tooltips-flex.min.js.map