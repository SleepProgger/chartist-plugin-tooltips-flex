/* chartist-plugin-tooltips-flex 0.0.1
 * Copyright Â© 2018 SleepProgger
 * Free to use under the WTFPL license.
 * http://www.wtfpl.net/
 */

!function(a,b){"function"==typeof define&&define.amd?define(["chartist"],function(c){return a.returnExportsGlobal=b(c)}):"object"==typeof exports?module.exports=b(require("chartist")):a["Chartist.plugins.Tooltips_flex"]=b(Chartist)}(this,function(a){return function(a,b,c){"use strict";function d(a,b){for(var c=[],d="",e=0;e<a.length;++e)c.push(a[e].value.x),d+=this.options.formatName(a[e].series.data)+": "+this.options.formatY(a[e].value.y)+"\n";return d=this.options.formatX(this.options.mergeXSeriesFnc(c))+"\n"+d}function e(a,b,c){for(var d=0,e=a.length-1;d<=e;){var f=e+d>>1,g=c(b,a[f]);if(g>0)d=f+1;else{if(!(g<0))return f;e=f-1}}return d-1}var f={tooltipOffset:{x:0,y:-15},tooltipClass:"chartist-tooltip-flex",markerClass:"chartist-tooltip-flex-marker",markerY:!1,mergeFnc:"nearest",displayFnc:d,highlightPoint:!0,highlightPointClass:"ct-tooltip-point-hit",formatX:c.noop,formatY:c.noop,formatName:function(a){var b=a.name;return b[0].toUpperCase()+b.substr(1)},mergeXSeriesFnc:function(a){return a[0]}};c.plugins=c.plugins||{},c.plugins.Tooltips_flex=function(a){a=c.extend({},f,a);var d=function(f){function g(a,b){var c=e(a.raw_x,b,function(a,b){return a>b?1:a<b?-1:0}),d=a.data.data,f=null;c=Math.max(0,c);var g=d[c];return c+1<d.length&&(f=d[c+1]),[g,f]}function h(){B=!1,A||i();for(var b=j(C.pageX,C.pageY),c=[],d=0;d<q.length;++d){var e=g(q[d],b.x);e=z(e[0],e[1],b.x),c.push({value:e,series:q[d]})}var f=a.displayFnc(c,n);f&&(n.textContent=f),y=n.offsetHeight,x=n.offsetWidth;var h=-x/2+a.tooltipOffset.x,m=-y+a.tooltipOffset.y;if(n.style.transform="translate("+(C.pageX+h)+"px, "+(C.pageY+m)+"px)",s.getNode().setAttribute("transform","translate("+b.x+" 0)"),a.markerY&&t.getNode().setAttribute("transform","translate(0 "+b.y+")"),a.highlightPoint)for(var d=0;d<c.length;++d){var o=c[d].value;c[d].series.point.getNode().setAttribute("transform","translate("+k(o.x)+" "+l(o.y)+")")}}function i(){n.classList.add("tooltip-show"),s.addClass("tooltip-show"),a.markerY&&t.addClass("tooltip-show"),A=!0}function j(a,b){var c=p.getScreenCTM(),d=D||p.createSVGPoint();return d.x=a,d.y=b,(d=d.matrixTransform(c.inverse()))||{x:0,y:0}}function k(a){var b=u.bounds||u.range,c=b.max,d=b.min,e=b.range||c-d;return u.axisLength/e*(a-d)+u.chartRect.x1}function l(a){var b=v.bounds||v.range,c=b.max,d=b.min,e=b.range||c-d;return v.chartRect.y1-v.axisLength/e*(a-d)}function m(a){var b=u.bounds||u.range,c=b.max,d=b.min;b.range;return(a-u.chartRect.x1)*b.range/u.axisLength+d}var n=b.body.querySelector(a.tooltipClass),o=f.container,p=null,q=[],r=!1,s=null,t=null,u=null,v=null;a.displayFnc=a.displayFnc.bind(d),d.options=a;var w=d.merge_functions={left:function(a,b,c){return a||(a=b),a},right:function(a,b,c){return b||(b=a),b},nearest:function(a,b,c){return a?b?(c=m(c),Math.abs(a.x-c)<Math.abs(b.x-c)?a:b):a:b},interpolate:function(a,b,c){if(!a)return b;if(!b)return a;c=m(c);var d=b.x-a.x,e=Math.abs(a.x-c)/d,f=Math.abs(b.x-c)/d;return{x:c,y:b.y*e+a.y*f}}},x=0,y=0,z=a.mergeFnc;"function"!=typeof z&&(z=w[z]),n||(n=b.createElement("div"),n.className=a.tooltipClass,n.style.position="absolute",n.style.whiteSpace="pre",n.style.top="0",b.body.append(n));var A=!1,B=!1,C=null;o.addEventListener("mouseenter",function(a){i()}),o.addEventListener("mouseleave",function(b){n.classList.remove("tooltip-show"),s.removeClass("tooltip-show"),a.markerY&&t.removeClass("tooltip-show")}),o.addEventListener("mousemove",function(a){r&&(C=a,B||(B=!0,requestAnimationFrame(h)))}),f instanceof c.Line&&f.on("created",function(b){u=b.axisX,v=b.axisY;var c=f.svg.getNode();p="svg"===c.tagName?c:c.ownerSVGElement;var d=f.svg.querySelector(".ct-grids"),e=d.getNode().getBoundingClientRect(),g=f.container.getBoundingClientRect(),h=e.top-g.top;if(s=f.svg.elem("line",{x1:0,y1:h,x2:0,y2:e.height+h,style:a.markerClass},a.markerClass),a.markerY){var i=e.left-g.left;t=f.svg.elem("line",{x1:i,y1:0,x2:e.width+i,y2:0,style:a.markerClass},a.markerClass)}q=[];for(var j=f.data.series,l=0;l<j.length;++l){for(var b=[],m=[],n=j[l].className?"."+j[l].className:'[*|series-name="'+j[l].name+'"]',o=f.svg.querySelector(n),w=0;w<j[l].data.length;++w)m.push(k(j[l].data[w].x,u));var x={data:j[l],raw_x:m,svg:o};a.highlightPoint&&(x.point=o.elem("line",{x1:0,y1:0,x2:.01,y2:0},f.options.classNames.point+" "+a.highlightPointClass)),q.push(x)}r=!0});var D=null};return d}}(window,document,a),a.plugins.Tooltips_flex});
//# sourceMappingURL=chartist-plugin-tooltips-flex.min.js.map