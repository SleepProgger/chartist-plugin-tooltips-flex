/* chartist-plugin-tooltips-flex 0.0.1
 * Copyright Â© 2018 SleepProgger
 * Free to use under the WTFPL license.
 * http://www.wtfpl.net/
 */

!function(a,b){"function"==typeof define&&define.amd?define(["chartist"],function(c){return a.returnExportsGlobal=b(c)}):"object"==typeof exports?module.exports=b(require("chartist")):a["Chartist.plugins.Tooltips_flex"]=b(Chartist)}(this,function(a){return function(a,b,c){"use strict";function d(a,b,c){for(var d=0,e=a.length-1;d<=e;){var f=e+d>>1,g=c(b,a[f]);if(g>0)d=f+1;else{if(!(g<0))return f;e=f-1}}return d-1}function e(a,b){for(var c=[],d="",e=0;e<a.length;++e)c.push(a[e].value.x),d+=this.tooltipNameFormat(a[e])+": "+this.tooltipFormatX(a[e].value.y)+"\n";return d=this.tooltipFormatY(this.tooltipMergeXSeries(c))+"\n"+d}var f={tooltipOffset:{x:0,y:-15},tooltipTooltipClass:"chartist-tooltip-flex",tooltipMarkerClass:"chartist-tooltip-flex-marker",tooltipMarkerY:!1,tooltipMergeFnc:"nearest",tooltipDisplayFnc:e,tooltipHighlightPoint:!0,tooltipHighlightPointClass:"ct-tooltip-point-hit",tooltipFollowMaxLine:!1,tooltipTooltipYDist:15,tooltipFormatX:c.noop,tooltipFormatY:c.noop,tooltipNameFormat:function(a){return a.name},tooltipMergeXSeries:function(a){return a[0]}},g={left:function(a,b,c){return a||(a=b),[[a.svg],a.data]},right:function(a,b,c){return b||(b=a),[[b.svg],b.data]},nearest:function(a,b,c){return a?b?Math.abs(a.svg.attr("x1")-c)<Math.abs(b.svg.attr("x1")-c)?[[a.svg],a.data]:[[b.svg],b.data]:[[a.svg],a.data]:[[b.svg],b.data]}};c.plugins=c.plugins||{},c.plugins.Tooltips_flex=function(e){return e=c.extend({},f,e),e.tooltipDisplayFnc=e.tooltipDisplayFnc.bind(e),function(f){function h(a,b){var c=d(a.raw_x,b,function(a,b){return a>b?1:a<b?-1:0}),e=a.data.data,f=null;c=Math.max(0,c);var g={svg:a.svg[c],data:e[c]};return c+1<e.length&&(f={svg:a.svg[c+1],data:e[c+1]}),[g,f]}function i(){v=!1,u||j();var b=f.container.getBoundingClientRect(),c=b.left+a.pageXOffset,d=w.pageX-c,g=null;e.tooltipMarkerY&&(g=w.pageY-(b.top+a.pageYOffset));for(var i=[],k=[],r=[],x=0;x<q.length;++x){var y=h(q[x],d);y=t(y[0],y[1],d),i.push({value:y[1],name:q[x].data.name});for(var z=y[0],A=0;A<z.length;++A){var B=z[A].getNode();r.push(B),k.push(B.getAttribute("y1"))}}var C=e.tooltipDisplayFnc(i,l);C&&(l.textContent=C),p=l.offsetHeight,o=l.offsetWidth;var D=-o/2+e.tooltipOffset.x,E=w.pageY;e.tooltipFollowMaxLine&&(E=Math.min.apply(Math,k)+b.top+a.pageYOffset-e.tooltipTooltipYDist);var F=-p+e.tooltipOffset.y;if(l.style.transform="translate("+(w.pageX+D)+"px, "+(E+F)+"px)",m.getNode().setAttribute("transform","translate("+d+" 0)"),e.tooltipMarkerY&&n.getNode().setAttribute("transform","translate(0 "+g+")"),e.tooltipHighlightPoint){for(var x=0;x<s.length;++x)s[x].classList.remove(e.tooltipHighlightPointClass);s=[];for(var x=0;x<r.length;++x)r[x].classList.add(e.tooltipHighlightPointClass),s.push(r[x])}}function j(){l.classList.add("tooltip-show"),m.addClass("tooltip-show"),e.tooltipMarkerY&&n.addClass("tooltip-show"),u=!0}var k=f.container,l=b.body.querySelector(".chartist-tooltip-flex"),m=null,n=null,o=0,p=0,q=[],r=!1,s=[],t=e.tooltipMergeFnc;"function"!=typeof t&&(t=g[t]),l||(l=b.createElement("div"),l.className=e.tooltipTooltipClass,l.style.position="absolute",l.style.whiteSpace="pre",l.style.top="0",b.body.append(l));var u=!1,v=!1,w=null;k.addEventListener("mouseenter",function(a){j()}),k.addEventListener("mouseleave",function(a){l.classList.remove("tooltip-show"),m.removeClass("tooltip-show"),e.tooltipMarkerY&&n.removeClass("tooltip-show")}),k.addEventListener("mousemove",function(a){r&&(w=a,v||(v=!0,requestAnimationFrame(i)))}),f instanceof c.Line&&f.on("created",function(a){var b=f.svg.querySelector(".ct-grids"),c=b.getNode().getBoundingClientRect(),d=f.container.getBoundingClientRect(),g=c.top-d.top;if(m=f.svg.elem("line",{x1:0,y1:g,x2:0,y2:c.height+g,style:e.tooltipMarkerClass},e.tooltipMarkerClass),e.tooltipMarkerY){var h=c.left-d.left;n=f.svg.elem("line",{x1:h,y1:0,x2:c.width+h,y2:0,style:e.tooltipMarkerClass},e.tooltipMarkerClass)}q=[];var i=f.data.series;console.log(f);for(var j=0;j<i.length;++j){var k=i[j].className;k=k?"."+k:'[*|series-name="'+i[j].name+'"]';for(var l=f.svg.querySelectorAll(k+" .ct-point").svgElements,o=[],p=0;p<l.length;++p)o.push(l[p].attr("x1"));var s={data:i[j],raw_x:o,svg:l};q.push(s)}r=!0})}},c.plugins.Tooltips_flex.mergeFunctions=g,c.plugins.Tooltips_flex.defaultOptions=f}(window,document,a),a.plugins.Tooltips_flex});
//# sourceMappingURL=chartist-plugin-tooltips-flex.min.js.map